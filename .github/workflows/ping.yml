name: Ping
env:
  REPO_OWNER: RijoyChowdhury
  REPO_NAME: example-event-dispatcher-workflows
  GITHUB_TOKEN: ${{ secrets.TOKEN }}
on:
  repository_dispatch:
    types: [run-ping]
  workflow_dispatch:
    inputs:
      name:
        # Friendly description to be shown in the UI instead of 'name'
        description: "Person to greet"
        # Default value if no value is explicitly provided
        default: "World"
        # Input has to be provided for the workflow to run
        required: true
  
jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install packages
        run: npm ci
      - name: Run Ping
        run: npm run ping
        
  createPullRequest:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Create/Append report file
        run: echo ${{ github.event.inputs.name }} >> report.txt
      - name: Greet
        run: echo "Hello ${{ github.event.inputs.name }}" 
      #- name: Print Data
      #  run: echo date +%s
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
          commit-message: Add report file
          title: 'Adds/Updates report file with value ${{ github.event.inputs.name }}'
          body: >
            This PR is auto-generated by 
            [create-pull-request](https://github.com/peter-evans/create-pull-request).
          labels: report, automated pr
